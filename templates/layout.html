<!DOCTYPE html>
<html lang="{{LANG_CODE}}" dir="{{DIR}}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{PAGE_TITLE}}</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Frank+Ruhl+Libre:wght@400;700&family=Lora:ital,wght@0,400;0,600;1,400&family=Playfair+Display:wght@400;600;700&display=swap"
        rel="stylesheet">

    <!-- Assets -->
    <link rel="stylesheet" href="{{ASSET_PATH}}assets/css/styles.css">
    <link rel="manifest" href="{{ASSET_PATH}}manifest.json">

    <!-- Scripts -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="{{ASSET_PATH}}assets/js/language_toggle.js" defer></script>
    <!-- Add other global scripts here -->
</head>

<body>
    <!-- Header -->
    <header>
        <!-- Branding Left -->
        <div class="branding">
            <h1>The Torah Book of Ideas</h1>
            <p class="subtitle">{{PART_TITLE}}</p>
        </div>

        <!-- Header Actions Right -->
        <div class="header-actions">
            <a href="{{ASSET_PATH}}search.html" class="icon-btn" aria-label="Search" title="Search">üîç</a>
            <button id="theme-toggle" class="icon-btn" aria-label="Toggle Theme" title="Switch Theme">üåô</button>
            <button id="lang-toggle" class="lang-toggle" aria-label="Switch Language">
                <span class="lang-icon">üåê</span>
                <span class="lang-text">{{LANG_TOGGLE_TEXT}}</span>
            </button>
        </div>
    </header>

    <!-- Navigation Bar -->
    <nav class="main-nav">
        <a href="{{ASSET_PATH}}index.html">Home</a>
        <a href="{{ASSET_PATH}}contents.html">Contents</a>
        <a href="{{PART_INDEX_LINK}}" class="active">{{PART_TITLE}}</a>
        <!-- Add more links here if needed -->
    </nav>

    <!-- Main Content -->
    <main class="container">
        <!-- Breadcrumbs -->
        <div class="breadcrumb">
            {{BREADCRUMB_HTML}}
        </div>

        <div class="content-card">
            <h3>{{SECTION_TITLE}}</h3>

            {{CONTENT_BODY}}

        </div>

        <!-- Section Nav -->
        <div class="page-nav">
            {{PREV_BUTTON}}
            {{NEXT_BUTTON}}
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <p>The Torah Book of Ideas ‚Äî A journey through wisdom, faith, and understanding</p>
    </footer>

    <!-- Scripts -->
    <script src="{{ASSET_PATH}}assets/js/search.js"></script>
    <script src="{{ASSET_PATH}}assets/js/glossary_tooltip.js"></script>
    <script src="{{ASSET_PATH}}assets/js/audio.js"></script>
    <script src="{{ASSET_PATH}}assets/js/bookmarks.js"></script>
    <!-- Theme Toggle Logic (Inline for speed) -->
    <script>
        const toggleBtn = document.getElementById('theme-toggle');
        const body = document.body;
        if (localStorage.getItem('theme') === 'dark') {
            body.classList.add('dark-mode');
            toggleBtn.textContent = '‚òÄÔ∏è';
        } else {
            toggleBtn.textContent = 'üåô';
        }
        toggleBtn.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            if (body.classList.contains('dark-mode')) {
                localStorage.setItem('theme', 'dark');
                toggleBtn.textContent = '‚òÄÔ∏è';
            } else {
                localStorage.setItem('theme', 'light');
                toggleBtn.textContent = 'üåô';
            }
        });
    </script>
</body>

</html>